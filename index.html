<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vintage Manga Birthday Card</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,700;1,400&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { width: 100%; height: 100%; }
        body { 
            background: linear-gradient(135deg, #8B7355, #A0826D);
            font-family: 'Crimson Text', serif;
            overflow-x: hidden;
        }
        .scroll-spacer { height: 300vh; }
        .viewport-fixed {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #9D8B7E, #A89068);
            z-index: 100;
            perspective: 1000px;
        }
        .manga-card {
            width: 320px;
            height: 420px;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(20deg) rotateZ(-10deg);
            filter: drop-shadow(0 50px 100px rgba(0,0,0,0.5));
        }
        .manga-panel {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 5px solid #4a4a4a;
            box-shadow: 0 8px 20px rgba(0,0,0,0.5), -8px 0 15px rgba(0,0,0,0.4), inset 0 0 40px rgba(139,69,19,0.2);
            overflow: hidden;
        }
        .manga-panel::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at 10% 15%, rgba(139,69,19,0.35), transparent 40%),
                        radial-gradient(ellipse at 90% 85%, rgba(165,42,42,0.3), transparent 45%),
                        repeating-linear-gradient(45deg, transparent, transparent 3px, rgba(0,0,0,0.04) 3px, rgba(0,0,0,0.04) 5px),
                        repeating-linear-gradient(-45deg, transparent, transparent 4px, rgba(0,0,0,0.03) 4px, rgba(0,0,0,0.03) 7px);
            z-index: 8;
            pointer-events: none;
        }
        .manga-panel::after {
            content: '';
            position: absolute;
            width: 3px;
            height: 100%;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
            background: linear-gradient(90deg, transparent, rgba(0,0,0,0.35) 25%, rgba(0,0,0,0.5) 50%, rgba(0,0,0,0.35) 75%, transparent);
            z-index: 9;
            pointer-events: none;
        }
        .manga-panel-front {
            background: linear-gradient(135deg, #D4C4B8, #C9B9AD);
            transform-style: preserve-3d;
            transform-origin: left center;
            z-index: 10;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            gap: 3px;
            padding: 6px;
        }
        .manga-panel-inside {
            background: linear-gradient(135deg, #C9B9AD, #BFAFB3);
            z-index: 5;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 30px;
            gap: 20px;
        }
        .panel-item {
            border: 3px solid #4a4a4a;
            background: linear-gradient(135deg, #E8DCC8, #DFD0C0);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .panel-item::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at 20% 25%, rgba(139,69,19,0.2), transparent 45%),
                        radial-gradient(ellipse at 75% 75%, rgba(165,42,42,0.15), transparent 45%);
            z-index: 1;
            pointer-events: none;
        }
        .panel-content {
            position: relative;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }
        .panel-text { color: #2a2a2a; font-weight: 700; font-style: italic; font-size: 2.2em; text-align: center; }
        .panel-emoji { font-size: 3em; animation: shake 0.6s infinite; filter: grayscale(100%) contrast(1.1); }
        .panel-svg { width: 80%; height: 80%; }
        .p1 { grid-column: 1 / 3; grid-row: 1 / 3; border-width: 4px; }
        .p2 { grid-column: 3; grid-row: 1; }
        .p3 { grid-column: 3; grid-row: 2; }
        .p4 { grid-column: 1; grid-row: 3; }
        .p5 { grid-column: 2; grid-row: 3; }
        .p6 { grid-column: 3; grid-row: 3; }
        .bubble {
            background: linear-gradient(135deg, #E8DCC8, #DFD0C0);
            border: 3px solid #2a2a2a;
            border-radius: 15px;
            padding: 12px 18px;
            position: relative;
            box-shadow: 3px 3px 0 rgba(0,0,0,0.35);
        }
        .bubble p { margin: 0; color: #2a2a2a; font-weight: 700; font-style: italic; }
        .msg { font-size: 0.95em; line-height: 1.8; color: #2a2a2a; font-weight: 600; }
        .video-box {
            width: 100%;
            max-width: 260px;
            border: 4px solid #2a2a2a;
            background: #E8DCC8;
            padding: 4px;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.4);
        }
        .video-box iframe { width: 100%; height: auto; display: block; }
        .scroll-hint {
            position: fixed;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 50;
            text-align: center;
            opacity: 1;
            transition: opacity 0.3s;
        }
        .scroll-hint.hide { opacity: 0; pointer-events: none; }
        .scroll-hint p {
            color: #2a2a2a;
            font-size: 1em;
            letter-spacing: 2px;
            margin-bottom: 12px;
            text-transform: uppercase;
            font-weight: 700;
            background: #D4C4B8;
            border: 4px solid #2a2a2a;
            padding: 10px 22px;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.35);
            display: inline-block;
        }
        .arrow {
            width: 44px;
            height: 44px;
            border: 4px solid #2a2a2a;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            color: #2a2a2a;
            animation: bounce 2s infinite;
            background: #D4C4B8;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.35);
            font-size: 1.8em;
            font-weight: bold;
        }
        .confetti {
            position: fixed;
            pointer-events: none;
            z-index: 15;
            background: #2a2a2a;
        }
        @keyframes shake {
            0%, 100% { transform: none; }
            25% { transform: translateX(-6px) rotate(-8deg); }
            75% { transform: translateX(6px) rotate(8deg); }
        }
        @keyframes bounce {
            0%, 100% { transform: none; }
            50% { transform: translateY(-15px); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        .fade { animation: fadeIn 1s ease-out 0.5s forwards; opacity: 0; }
    </style>
</head>
<body>
    <div class="scroll-spacer"></div>
    <div class="viewport-fixed" id="vp">
        <div class="manga-card" id="card">
            <div class="manga-panel manga-panel-front p1" id="front">
                <div class="panel-item p1">
                    <div class="panel-content">
                        <div class="bubble">
                            <p>HAPPY<br>BIRTHDAY<br>MONKY!</p>
                        </div>
                    </div>
                </div>
                <div class="panel-item p2">
                    <div class="panel-content">
                        <svg viewBox="0 0 100 100" class="panel-svg">
                            <rect x="20" y="60" width="60" height="25" fill="#FFD4A3" stroke="#4a4a4a" stroke-width="2"></rect>
                            <rect x="15" y="55" width="70" height="8" fill="#FF69B4" stroke="#4a4a4a" stroke-width="2"></rect>
                            <rect x="20" y="50" width="60" height="8" fill="#FFB6C1" stroke="#4a4a4a" stroke-width="2"></rect>
                            <rect x="45" y="30" width="8" height="20" fill="#FFD700" stroke="#4a4a4a" stroke-width="1.5"></rect>
                            <path d="M 49 25 Q 45 15 49 10 Q 53 15 49 25" fill="#FF4500" stroke="#4a4a4a" stroke-width="1"></path>
                        </svg>
                    </div>
                </div>
                <div class="panel-item p3">
                    <div class="panel-content">
                        <svg viewBox="0 0 100 100" class="panel-svg">
                            <circle cx="50" cy="50" r="30" fill="none" stroke="#4a4a4a" stroke-width="2"></circle>
                            <circle cx="50" cy="50" r="25" fill="none" stroke="#4a4a4a" stroke-width="1.5"></circle>
                            <line x1="50" y1="20" x2="50" y2="5" stroke="#4a4a4a" stroke-width="2"></line>
                            <line x1="50" y1="80" x2="50" y2="95" stroke="#4a4a4a" stroke-width="2"></line>
                            <line x1="20" y1="50" x2="5" y2="50" stroke="#4a4a4a" stroke-width="2"></line>
                            <line x1="80" y1="50" x2="95" y2="50" stroke="#4a4a4a" stroke-width="2"></line>
                            <text x="50" y="58" font-size="24" font-weight="bold" text-anchor="middle" fill="#4a4a4a">Á•ù</text>
                        </svg>
                    </div>
                </div>
                <div class="panel-item p4">
                    <div class="panel-content">
                        <span class="panel-emoji">‚≠ê</span>
                    </div>
                </div>
                <div class="panel-item p5">
                    <div class="panel-content">
                        <span class="panel-emoji">‚ú®</span>
                    </div>
                </div>
                <div class="panel-item p6">
                    <div class="panel-content">
                        <span class="panel-emoji">üéâ</span>
                    </div>
                </div>
            </div>
            <div class="manga-panel manga-panel-inside" id="inside">
                <div class="bubble fade">
                    <p>„Éê„Éº„Çπ„Éá„ÉºÔºÅ</p>
                </div>
                <p class="msg fade">Ë™ïÁîüÊó•„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô!<br>‰ªäÊó•„Åå„ÅÇ„Å™„Åü„Å´„Å®„Å£„Å¶ÊúÄÈ´ò„Å´Á¥†Êô¥„Çâ„Åó„ÅÑ‰∏ÄÊó•„Åß„ÅÇ„Çä„Åæ„Åô„Çà„ÅÜ„Å´„ÄÇ</p>
                <div class="video-box">
                    <iframe width="260" height="160" src="https://www.youtube.com/embed/jNQXAC9IVRw" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>
    <div class="scroll-hint" id="hint">
        <p>SCROLL</p>
        <div class="arrow">‚Üì</div>
    </div>
    <script>
        const card = document.getElementById('card');
        const front = document.getElementById('front');
        const hint = document.getElementById('hint');
        const vp = document.getElementById('vp');
        const spacer = document.querySelector('.scroll-spacer');
        let done = false;

        function getProgress() {
            const top = window.scrollY;
            const height = spacer.clientHeight - window.innerHeight;
            return Math.min(Math.max(top / height, 0), 1);
        }

        function addConfetti() {
            if (done) return;
            done = true;
            for (let i = 0; i < 50; i++) {
                const p = document.createElement('div');
                p.className = 'confetti';
                p.style.left = Math.random() * window.innerWidth + 'px';
                p.style.top = '-20px';
                const s = Math.random() * 10 + 5;
                p.style.width = s + 'px';
                p.style.height = s + 'px';
                const dur = Math.random() * 2.5 + 2;
                const del = Math.random() * 0.3;
                p.style.animation = 'fall ' + dur + 's linear ' + del + 's forwards';
                vp.appendChild(p);
                setTimeout(() => p.remove(), (dur + del) * 1000);
            }
        }

        function update() {
            const p = getProgress();
            front.style.transform = 'rotateY(' + (p * -140) + 'deg)';
            card.style.transform = 'rotateX(' + (20 * (1 - p)) + 'deg) rotateZ(' + (-10 * (1 - p)) + 'deg)';
            
            if (p > 0.05) {
                hint.classList.add('hide');
            } else {
                hint.classList.remove('hide');
            }
            
            // Reset confetti when card closes
            if (p < 0.70) {
                done = false;
            }
            
            // Trigger confetti when card opens
            if (p > 0.85) {
                addConfetti();
            }
        }

        let busy = false;
        window.addEventListener('scroll', () => {
            if (!busy) {
                requestAnimationFrame(update);
                busy = true;
                setTimeout(() => { busy = false; }, 16);
            }
        }, { passive: true });

        window.addEventListener('resize', update, { passive: true });
        update();
    </script>
</body>
</html>